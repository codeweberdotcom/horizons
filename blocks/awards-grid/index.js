(()=>{"use strict";var e,t={743(e,t,a){const r=window.wp.blocks,n=window.React,l=window.wp.blockEditor,o=window.wp.i18n,s=window.wp.element,i=window.wp.components,d=window.wp.apiFetch;var c=a.n(d);const m=({attributes:e,setAttributes:t})=>{const{postsPerPage:a,orderBy:r,order:l,showAllAwardsLink:d,awardCategory:m=[],awardTags:u=[]}=e,[g,p]=(0,s.useState)([]),[h,b]=(0,s.useState)([]),[y,w]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{w(!0);try{const[e,t]=await Promise.all([c()({path:"/wp/v2/award_category?per_page=100&_fields=id,name"}).catch(()=>[]),c()({path:"/wp/v2/award_tags?per_page=100&_fields=id,name"}).catch(()=>[])]);p(Array.isArray(e)?e:[]),b(Array.isArray(t)?t:[])}catch(e){p([]),b([])}finally{w(!1)}})()},[]);const _=[{label:(0,o.__)("Date","horizons"),value:"date"},{label:(0,o.__)("Title","horizons"),value:"title"},{label:(0,o.__)("Menu Order","horizons"),value:"menu_order"}],C=[{label:(0,o.__)("Ascending","horizons"),value:"ASC"},{label:(0,o.__)("Descending","horizons"),value:"DESC"}];return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.RangeControl,{label:(0,o.__)("Posts Per Page","horizons"),value:a||7,onChange:e=>t({postsPerPage:e}),min:1,max:20}),(0,n.createElement)("div",{style:{marginTop:"16px"}},(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Order By","horizons"),value:r||"date",options:_,onChange:e=>t({orderBy:e})})),(0,n.createElement)("div",{style:{marginTop:"16px"}},(0,n.createElement)(i.SelectControl,{label:(0,o.__)("Order","horizons"),value:l||"DESC",options:C,onChange:e=>t({order:e})})),(0,n.createElement)("div",{style:{marginTop:"16px"}},(0,n.createElement)(i.ToggleControl,{label:(0,o.__)('Show "All Awards" Link',"horizons"),checked:!1!==d,onChange:e=>t({showAllAwardsLink:e})})),(0,n.createElement)("div",{style:{marginTop:"20px",borderTop:"1px solid #ddd",paddingTop:"16px"}},y?(0,n.createElement)(i.Spinner,null):(0,n.createElement)(n.Fragment,null,g.length>0&&(0,n.createElement)("div",{style:{marginBottom:"16px"}},(0,n.createElement)("strong",{style:{display:"block",marginBottom:"8px"}},(0,o.__)("Filter by Category","horizons")),g.map(e=>(0,n.createElement)(i.CheckboxControl,{key:e.id,label:e.name||`#${e.id}`,checked:(m||[]).includes(e.id),onChange:()=>(e=>{const a=m.includes(e)?m.filter(t=>t!==e):[...m,e].sort((e,t)=>e-t);t({awardCategory:a})})(e.id)}))),h.length>0&&(0,n.createElement)("div",null,(0,n.createElement)("strong",{style:{display:"block",marginBottom:"8px"}},(0,o.__)("Filter by Tags","horizons")),h.map(e=>(0,n.createElement)(i.CheckboxControl,{key:e.id,label:e.name||`#${e.id}`,checked:(u||[]).includes(e.id),onChange:()=>(e=>{const a=u.includes(e)?u.filter(t=>t!==e):[...u,e].sort((e,t)=>e-t);t({awardTags:a})})(e.id)}))))))},u=({attributes:e,setAttributes:t})=>{const{gridColumns:a,gridColumnsMd:r,gridColumnsSm:l}=e;return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{style:{marginTop:"16px"}},(0,n.createElement)(i.RangeControl,{label:(0,o.__)("Columns (lg)","horizons"),value:parseInt(a)||4,onChange:e=>t({gridColumns:String(e)}),min:1,max:12})),(0,n.createElement)("div",{style:{marginTop:"16px"}},(0,n.createElement)(i.RangeControl,{label:(0,o.__)("Columns (md)","horizons"),value:parseInt(r)||4,onChange:e=>t({gridColumnsMd:String(e)}),min:1,max:12})),(0,n.createElement)("div",{style:{marginTop:"16px"}},(0,n.createElement)(i.RangeControl,{label:(0,o.__)("Columns (sm)","horizons"),value:parseInt(l)||2,onChange:e=>t({gridColumnsSm:String(e)}),min:1,max:12})))},g=({attributes:e,setAttributes:t})=>{const a=[{name:"main",title:(0,o.__)("Main","horizons")},{name:"layout",title:(0,o.__)("Layout","horizons")},{name:"settings",title:(0,o.__)("Settings","horizons")}];return(0,n.createElement)(l.InspectorControls,null,(0,n.createElement)(i.TabPanel,{tabs:a},a=>(0,n.createElement)(n.Fragment,null,"main"===a.name&&(0,n.createElement)(i.PanelBody,null,(0,n.createElement)(m,{attributes:e,setAttributes:t})),"layout"===a.name&&(0,n.createElement)(i.PanelBody,null,(0,n.createElement)(u,{attributes:e,setAttributes:t})),"settings"===a.name&&(0,n.createElement)(i.PanelBody,null,(0,n.createElement)(i.TextControl,{label:(0,o.__)("Block Class","horizons"),value:e.blockClass||"",onChange:e=>t({blockClass:e}),help:(0,o.__)("Additional CSS class for the block wrapper","horizons")}),(0,n.createElement)(i.TextControl,{label:(0,o.__)("Block ID","horizons"),value:e.blockId||"",onChange:e=>t({blockId:e}),help:(0,o.__)("Custom ID for the block wrapper","horizons")}),(0,n.createElement)(i.TextControl,{label:(0,o.__)("Block Data","horizons"),value:e.blockData||"",onChange:e=>t({blockData:e}),help:(0,o.__)("Custom data attribute value","horizons")})))))},p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"horizons-blocks/awards-grid","version":"1.0.0","title":"Awards Grid","category":"codeweber-gutenberg-elements","icon":"awards","description":"Display awards in a grid layout","keywords":["awards","grid","prizes"],"supports":{"html":false,"customClassName":false},"textdomain":"horizons","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":false,"render":"file:./render.php","attributes":{"postsPerPage":{"type":"number","default":7},"orderBy":{"type":"string","default":"date"},"order":{"type":"string","default":"DESC"},"gridColumns":{"type":"string","default":"4"},"gridColumnsMd":{"type":"string","default":"4"},"gridColumnsSm":{"type":"string","default":"2"},"showAllAwardsLink":{"type":"boolean","default":true},"awardCategory":{"type":"array","default":[],"items":{"type":"number"}},"awardTags":{"type":"array","default":[],"items":{"type":"number"}},"blockClass":{"type":"string","default":""},"blockId":{"type":"string","default":""},"blockData":{"type":"string","default":""}}}');(0,r.registerBlockType)(p.name,{...p,edit:function({attributes:e,setAttributes:t,clientId:a}){const{postsPerPage:r=7,orderBy:i="date",order:d="DESC",gridColumns:m="4",gridColumnsMd:u="4",gridColumnsSm:p="2",showAllAwardsLink:h=!0,awardCategory:b=[],awardTags:y=[],blockClass:w=""}=e,[_,C]=(0,s.useState)([]),[v,E]=(0,s.useState)(!1),f=(0,l.useBlockProps)({className:`horizons-awards-grid-block ${w}`,"data-block":a});return(0,s.useEffect)(()=>{(async()=>{E(!0);try{const e=r||7,t=(d||"DESC").toLowerCase();let a=`/wp/v2/awards?per_page=${e}&orderby=${i}&order=${t}&_embed`;(b||[]).length&&(a+="&award_category="+b.join(",")),(y||[]).length&&(a+="&award_tags="+y.join(","));const n=await c()({path:a});if(!Array.isArray(n))return C([]),void E(!1);const l=n.map(e=>{let t="";return e.featured_media&&(t=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url||""),{id:e.id,title:e.title?.rendered||"",link:e.link||"#",thumbnail:t}});C(l)}catch(e){console.error("Awards Grid: Error fetching posts:",e),C([])}finally{E(!1)}})()},[r,i,d,b,y]),(0,n.createElement)(n.Fragment,null,(0,n.createElement)(g,{attributes:e,setAttributes:t}),(0,n.createElement)("div",{...f},v?(0,n.createElement)("div",{className:"horizons-awards-grid-placeholder",style:{padding:"20px",textAlign:"center"}},(0,o.__)("Loading awards...","horizons")):0===_.length?(0,n.createElement)("div",{className:"horizons-awards-grid-placeholder",style:{padding:"20px",textAlign:"center"}},(0,o.__)("No awards found. Please ensure awards post type exists and has posts.","horizons")):(0,n.createElement)("div",{className:`row row-cols-2 row-cols-sm-${p} row-cols-md-${u} row-cols-lg-${m} gx-3 gy-3`},_.map(e=>(0,n.createElement)("div",{key:e.id,className:"col"},(0,n.createElement)("a",{href:e.link,className:"card hover-scale h-100 align-items-center"},(0,n.createElement)("div",{className:"card-body align-items-center d-flex p-0"},(0,n.createElement)("figure",{className:"p-0 mb-0"},e.thumbnail?(0,n.createElement)("img",{decoding:"async",src:e.thumbnail,alt:e.title,style:{width:"100%",height:"auto"}}):(0,n.createElement)("div",{style:{width:"100%",height:"200px",background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"}},(0,n.createElement)("span",null,(0,o.__)("No image","horizons")))))))),h&&(0,n.createElement)("div",{className:"col"},(0,n.createElement)("div",{className:"card h-100 bg-dusty-navy"},(0,n.createElement)("div",{className:"card-body align-content-center text-center"},(0,n.createElement)("span",{className:"hover-4 link-body label-s text-sub-white"},(0,o.__)("All Awards","horizons"))))))))},save:function(){return null}})}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,a,n,l)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,n,l]=e[c],s=!0,i=0;i<a.length;i++)(!1&l||o>=l)&&Object.keys(r.O).every(e=>r.O[e](a[i]))?a.splice(i--,1):(s=!1,l<o&&(o=l));if(s){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[a,n,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={905:0,478:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,l,[o,s,i]=a,d=0;if(o.some(t=>0!==e[t])){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(i)var c=i(r)}for(t&&t(a);d<o.length;d++)l=o[d],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(c)},a=globalThis.webpackChunkhorizons_theme=globalThis.webpackChunkhorizons_theme||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=r.O(void 0,[478],()=>r(743));n=r.O(n)})();